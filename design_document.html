<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>D3 Project 1</title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <link href="styling.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="icon" type="image/jpg" href="media/icon.jpg">

</head>

<body style="background-color: rgb(250, 250, 246)">
    <div class="w3-bar w3-border w3-teal w3-center">
        <a href="design_document.html" style="width:33.33%" class="w3-bar-item w3-button w3-mobile w3-padding-18"> About
        </a>
        <a href="index.html" style="width:33.33%" class="w3-bar-item w3-button w3-mobile w3-padding-14">John Snow's
            Cholera Map</a>

        <a href="presentation.html" style="width:33.33%" class="w3-bar-item w3-button w3-mobile w3-padding-18">How to
            Use</a>
    </div>
    <div class="w3-container">
        <h5><b></br>About Me :</b></h5>
        <p><b>Hello, I am Sailesh Vemula, an Indian who is doing a Master's in Applied Data Science at Indiana
                University - Purdue University Indianapolis.
            </b></p>
        <h5><b></br>About Project :</b></h5>
        <p>As part of my Data visualization course, I have done a project based on d3.js version 3. The project is about
            recreating earliest visualizations marvel John Snow's Cholera map Break out visualization. It enabled the
            analysts to know the
            reason for the breakout the Cholera, which is due to the contaminated water. This is the first one which
            enabled us to
            know the value of Data Visualization to know the patterns in the data changing. </p>
        <h5><b></br>Deisgn Process and steps :</b></h5>
        <p> - Firstly, I went through all the datasets like streets, pumps, deaths count, age, gender. </p>
        <p> - After Brianstorming about how to plot the data, I understood that in order to know the specific location
            of person died of specific date, I have to do some data manipulation techniques.</p>
        <p> - As there are different types of datasets like json, csv. I need to use different d3 functions to use
            different datasets.</p>
        <p> - Made different rough sketches after which I figured out best way to represent dashboard.
        </p>
        <p> - Below are few sketches I made
        </p><img src="media/sketch1.jpg" alt="Fig: Initial Sketch" style="width:400px;height:220px;">
        <img src="media/sketch2.jpg" alt="Fig: Final Sketch" style="width:400px;height:220px;">
        <p></p>
        <p> - From coming from first sketch to final second sketch, it took several iterations involved.</p>
        <p> - The Main reason for selecting the second design is that the first sketch requires to scroll down to see
            the full visualization. As this is not a good way of creating a dashboard, I opted the second sketch which
            is quite sufficient.</p>
        <h5><b></br>Design Challenges :</b></h5>
        <p> - The main problem is of enabling with color blindess tested colors</p>
        <p> - Other is of fitting all the figures in the respective containers, this is done by giving container Ids and
            classes.</p>
        <h5><b></br>Rationale of your design choices :</b></h5>
        <p> - Mainly after creating the navigation to traverse over the pages, I have added the filter buttons in order
            to filter out data in the dashboard. After this, created three container left, middle and right. In left ,
            added Map. In the middle container, added the bar chart and labels. In the right container, added the time
            series line chart</p>
        <p> - For drawing the map, I have used the streets.json file available in the media folder. It consists of x and
            y coordinates of all the streeets required to draw the map. Using the path element, plotted the streets and
            completed the map. For setting the pumps locations on the map now plotted, used the same svg container and
            using the pumps.csv file, I have plotted the pumps. But In here, I have used the pump image inorder to
            clearly demonstrate the increase of deaths around it. Plotting the people died location based on the geder,
            age, date is the main challenge I Have faced. This is done by writing different funcions to plot using the
            age or gender on the map. For the map, I have added the zoom and drag capabilities. So, that we can zoom and
            see clearly the location of the people.</p>
        <p> - The line chart is drawn using deaths_age_sex.csv and deathdays.csv based on the days they have died. I
            have added an interaction to the maps and labels. So that we can know the exact location of the person died.
            I have added the mouseover and mouseout tansitions here in order make the interaction more effective.</p>
        <p> - The Bar chart is done by creating a dataset called data.json which consists of the age , gender based
            deaths data. With the help of this I have plotted the bar chart and added the apropriate labels, titles and
            legends over the same container.</p>
        <p>
            - The labels legend are arranged such that it changes over the filter the user will creates. It is added in
            the middle container.
        </p>
        <h5><b></br>Observations :</b></h5>
        <p> - The final goal of doing all this exercise is to analyse the reason for the outbreak.</p>
        <p>
            - First, people think that this is because of the water or the age groups. But after, going through the John
            snow's visialization, it is understood that the spread is more across the conatminated water loactions
            (pumps).
        </p>
        <p>
            - While coming to age groups, After plotting the bar chart based on the age in dashboard. I thought of doing
            pie chart depicting the number of deaths across each group. From the pie, it is evident that the infants and
            elders are mostly getting affected. While the Gender is not much of influencing factor.
        </p>
        <p>
            - So, finally the outbreak is seems to be started and spreading near the contaminated water which is around
            brewery and the death count hit at
            peak on 1st September 1854. And infants and Elders are to be kept very safe as they are the mostly affected
            ones.
        </p>
        <p>
            You can see below the pie chart depicting more deaths are among infants and elders.
        </p>
        <div>
            <script type="text/javascript">
                var w = 800,
                    h = 800,
                    r = 200,
                    color = d3.scale.ordinal()
                    .range(["#41ab5d", "#d0d1e6", "#a6bddb", "#67a9cf", "#1c9099", "#016c59"]);;
                var div1 = d3.select("body").append("div")
                    .attr("class", "tooltip6")
                    .style("opacity", 0);
                data = [{
                        "label": "0-10 (173) ",
                        "value": 173
                    }, {
                        "label": "11-20(48)",
                        "value": 48
                    }, {
                        "label": "21-40(58)",
                        "value": 58
                    },
                    {
                        "label": "41-60(57",
                        "value": 57
                    }, {
                        "label": "61-80(91",
                        "value": 91
                    }, {
                        "label": "> 80(174)",
                        "value": 174
                    },
                ];

                var vis = d3.select("body")
                    .append("svg:svg")
                    .data([data])
                    .attr("width", w)
                    .attr("height", h)
                    .append("svg:g")
                    .attr("transform", "translate(400,250)")

                var arc = d3.svg.arc()
                    .outerRadius(r);

                var pie = d3.layout.pie()
                    .value(function (d) {
                        return d.value;
                    });

                var arcs = vis.selectAll("g.slice")
                    .data(pie)
                    .enter()
                    .append("svg:g")
                    .attr("class", "slice");

                arcs.append("svg:path")
                    .attr("fill", function (d, i) {
                        return color(i);
                    })
                    .attr("d", arc)
                    .on("click", function (d) {
                        div1.transition()
                            .duration(100)
                            .style("opacity", 5);
                        console.log(d.data.label);
                        console.log(d3.event.pageX)

                        div1.html("Age Group :  " + d.data.label)
                            .style("left", (d3.event.pageX = 300) + "px")
                            .style("top", (d3.event.pageY = 400) + "px");;
                    })
                    .on("mouseout", function (d) {
                        div1.transition()
                            .duration(500)
                            .style("opacity", 0);


                    });

                arcs.append("svg:text")
                    .attr("transform", function (d) {
                        d.innerRadius = 0;
                        d.outerRadius = r;
                        return "translate(" + arc.centroid(d) + ")";
                    })
                    .attr("text-anchor", "middle")
                    .text(function (d, i) {
                        return data[i].label;
                    });
            </script>
        </div>
    </div>
</body>

</html>